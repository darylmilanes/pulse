<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover" />
  <title>Decode Â· Professional Utilities</title>
  
  <!-- PWA Manifest & Icons -->
  <link rel="manifest" href="manifest.json">
  <link rel="apple-touch-icon" href="icon-192.png">
  <meta name="theme-color" content="#004080">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

  <!-- Tailwind CSS -->
  <script src="https://cdn.tailwindcss.com"></script>
  
  <!-- React & ReactDOM -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  
  <!-- Babel -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  
  <!-- QR Code Library -->
  <script src="https://cdn.jsdelivr.net/npm/qr-code-styling@1.6.0/lib/qr-code-styling.js"></script>

  <!-- Phosphor Icons -->
  <script src="https://unpkg.com/@phosphor-icons/web"></script>

  <!-- Font -->
  <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap" rel="stylesheet">

  <style>
    :root {
      /* Professional Deep Blue Palette */
      --primary: #004080; 
      --primary-dark: #003366;
      --bg-body: #fafeff; /* Ice White */
      --glass: rgba(255, 255, 255, 0.95);
      --glass-border: rgba(0, 64, 128, 0.1);
    }
    
    body {
      font-family: 'Plus Jakarta Sans', sans-serif;
      background-color: var(--bg-body);
      color: #1e293b;
      -webkit-tap-highlight-color: transparent;
      overscroll-behavior-y: none;
    }

    /* Scrollbar Hiding */
    .no-scrollbar::-webkit-scrollbar { display: none; }
    .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }

    /* Animations */
    @keyframes packet-send {
      0% { width: 0%; left: 0; }
      50% { width: 100%; left: 0; }
      100% { width: 0%; left: 100%; }
    }
    .packet-loader {
      position: absolute;
      bottom: 0; left: 0; height: 3px;
      background: #fff;
      animation: packet-send 1s infinite ease-in-out;
    }

    @keyframes fade-in-up {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .animate-enter {
      animation: fade-in-up 0.4s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }

    /* Glass Utilities */
    .glass-panel {
      background: var(--glass);
      backdrop-filter: blur(20px) saturate(180%);
      -webkit-backdrop-filter: blur(20px) saturate(180%);
      border-top: 1px solid var(--glass-border);
      box-shadow: 0 -4px 20px rgba(0, 0, 0, 0.03);
    }

    /* QR Canvas Responsive Fix */
    .qr-container canvas {
      width: 100% !important;
      height: auto !important;
      display: block;
      transition: all 0.3s ease; 
    }

    /* iOS Input Fix */
    input, textarea, select {
      font-size: 16px !important; 
    }
    
    /* Remove default focus rings */
    input:focus, textarea:focus, select:focus {
      outline: none;
      box-shadow: none;
      border-color: transparent;
    }

    /* Professional Active State */
    .liquid-active {
      background: rgba(0, 64, 128, 0.08);
      border: 1px solid rgba(0, 64, 128, 0.1);
      color: var(--primary);
    }

    /* Monospaced numbers for decoding effect */
    .font-mono-nums {
      font-feature-settings: "tnum";
      font-variant-numeric: tabular-nums;
    }
  </style>
</head>
<body class="h-[100dvh] w-full overflow-hidden bg-[#fafeff]">
  <div id="root" class="h-full w-full"></div>

  <script type="text/babel">
    // --- Service Worker Registration ---
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then(reg => console.log('SW Registered!', reg.scope))
          .catch(err => console.log('SW Failed', err));
      });
    }

    const { useState, useEffect, useRef } = React;

    // --- Components ---

    // 1. Full Width Tab Bar
    const TabBar = ({ activeTab, setTab }) => {
      const tabs = [
        { id: 'pixelate', label: 'Pixelate', icon: 'ph-scan' },
        { id: 'packet', label: 'Packet', icon: 'ph-link-break' },
        { id: 'settings', label: 'Settings', icon: 'ph-faders' },
      ];

      return (
        <div className="fixed bottom-0 left-0 right-0 z-50 glass-panel pb-safe">
          <div className="flex justify-around items-center h-20 px-2 pb-2">
            {tabs.map((t) => {
              const isActive = activeTab === t.id;
              return (
                <button
                  key={t.id}
                  onClick={() => setTab(t.id)}
                  className="relative flex-1 flex flex-col items-center justify-center h-full group"
                >
                  <div className={`
                    relative flex items-center justify-center w-14 h-9 rounded-md transition-all duration-300
                    ${isActive ? 'liquid-active scale-105' : 'text-slate-400 group-hover:text-slate-600'}
                  `}>
                    <i className={`${t.icon} text-2xl ${isActive ? 'ph-bold text-[#004080]' : 'ph-bold'}`}></i>
                  </div>
                  <span className={`
                    text-[10px] font-bold tracking-wide mt-1.5 transition-all duration-300
                    ${isActive ? 'text-[#004080] opacity-100 translate-y-0' : 'text-slate-400 opacity-0 translate-y-2 hidden'}
                  `}>
                    {t.label}
                  </span>
                </button>
              );
            })}
          </div>
        </div>
      );
    };

    // 2. Pixelate View (QR)
    const PixelateView = ({ settings }) => {
      const [text, setText] = useState('https://darylmilanes.com');
      const [qrType, setQrType] = useState('dots'); 
      const [color, setColor] = useState('#004080'); 
      const [bgColor, setBgColor] = useState('#ffffff');
      const [quality, setQuality] = useState(1024);
      const [logo, setLogo] = useState(null);
      
      const qrRef = useRef(null);
      const qrCodeObj = useRef(null);

      useEffect(() => {
        qrCodeObj.current = new QRCodeStyling({
          width: 600, 
          height: 600,
          type: 'canvas',
          data: text,
          margin: 0,
          qrOptions: { errorCorrectionLevel: 'H' },
          imageOptions: { crossOrigin: 'anonymous', margin: 10 }
        });
        qrCodeObj.current.append(qrRef.current);
      }, []);

      useEffect(() => {
        if (!qrCodeObj.current) return;
        
        qrCodeObj.current.update({
          data: text || 'https://darylmilanes.com',
          margin: qrType === 'dots' ? 40 : 20, 
          dotsOptions: { 
            color: color, 
            type: qrType === 'dots' ? 'dots' : 'square' 
          },
          backgroundOptions: { color: bgColor },
          cornersSquareOptions: { 
            type: qrType === 'dots' ? 'extra-rounded' : 'square', 
            color: color 
          },
          cornersDotOptions: { 
            type: qrType === 'dots' ? 'dot' : 'square', 
            color: color 
          },
          image: logo
        });
      }, [text, color, bgColor, qrType, logo]);

      const handleDownload = async () => {
        if (!qrCodeObj.current) return;
        const originalWidth = qrCodeObj.current._options.width;
        qrCodeObj.current.update({ width: quality, height: quality });
        await qrCodeObj.current.download({ name: "decode-qr", extension: "png" });
        qrCodeObj.current.update({ width: originalWidth, height: originalWidth });
      };

      const handleLogoUpload = (e) => {
        const file = e.target.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = () => setLogo(reader.result);
          reader.readAsDataURL(file);
        }
      };

      return (
        <div className="animate-enter flex flex-col items-center space-y-5 pb-8">
          
          <div className="text-center pt-6 pb-2">
            <h1 className="text-xl font-bold tracking-tight text-slate-800">Pixelate</h1>
            <p className="text-[10px] text-slate-500 font-bold tracking-widest uppercase">Professional QR</p>
          </div>

          {/* Canvas Card - REDUCED PADDING to p-2 */}
          <div className="w-full relative bg-white rounded-xl shadow-sm border border-slate-200 p-2 flex flex-col items-center justify-center">
             <div 
               ref={qrRef} 
               className={`
                 qr-container w-full aspect-square flex items-center justify-center bg-white transition-all duration-500
                 ${qrType === 'dots' ? 'rounded-full' : 'rounded-lg'}
               `}
             ></div>
          </div>

          {/* Controls Container */}
          <div className="w-full space-y-3">
            
            {/* Input */}
            <div className="bg-white px-4 py-3 rounded-xl shadow-sm border border-slate-200">
              <label className="block text-[10px] font-bold text-slate-400 uppercase tracking-widest mb-1">
                Content
              </label>
              <input 
                type="text"
                value={text}
                onChange={(e) => setText(e.target.value)}
                placeholder="https://..."
                className="w-full bg-transparent border-none p-0 text-sm font-semibold text-slate-800 placeholder-slate-300 h-6"
              />
            </div>

            {/* Shape & Quality Grid */}
            <div className="grid grid-cols-2 gap-3">
              <div className="bg-white px-4 py-3 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between h-20">
                <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Shape</label>
                <div className="flex bg-slate-50 p-0.5 rounded-lg mt-1">
                  <button 
                    onClick={() => setQrType('square')}
                    className={`flex-1 py-1 rounded-md text-[10px] font-bold transition-all ${qrType === 'square' ? 'bg-white shadow-sm text-slate-900' : 'text-slate-400'}`}
                  >Square</button>
                  <button 
                    onClick={() => setQrType('dots')}
                    className={`flex-1 py-1 rounded-md text-[10px] font-bold transition-all ${qrType === 'dots' ? 'bg-white shadow-sm text-slate-900' : 'text-slate-400'}`}
                  >Circle</button>
                </div>
              </div>

               <div className="bg-white px-4 py-3 rounded-xl shadow-sm border border-slate-200 flex flex-col justify-between h-20">
                <label className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Quality</label>
                 <select 
                  value={quality} 
                  onChange={(e) => setQuality(Number(e.target.value))}
                  className="w-full bg-transparent font-bold text-sm text-slate-700 border-none p-0 mt-1"
                 >
                   <option value="512">Screen</option>
                   <option value="1024">Print (HD)</option>
                   <option value="4096">Max (4K)</option>
                 </select>
              </div>
            </div>

            {/* Color & Logo */}
            <div className="bg-white px-4 py-3 rounded-xl shadow-sm border border-slate-200 space-y-2">
               <div className="flex items-center justify-between h-8">
                  <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Primary Color</span>
                  <div className="relative flex items-center gap-3">
                    <span className="text-[10px] font-mono text-slate-400">{color}</span>
                    <div className="w-5 h-5 rounded-md border border-slate-200 shadow-sm" style={{backgroundColor: color}}></div>
                    <input 
                      type="color" 
                      value={color} 
                      onChange={(e) => setColor(e.target.value)} 
                      className="absolute opacity-0 w-full h-full cursor-pointer z-10 top-0 left-0" 
                    />
                  </div>
               </div>
               
               <div className="h-px bg-slate-50 w-full"></div>
               
               <div className="flex items-center justify-between h-8">
                  <span className="text-[10px] font-bold text-slate-400 uppercase tracking-widest">Branding</span>
                  {logo ? (
                     <div className="flex items-center gap-2">
                        <img src={logo} className="w-5 h-5 rounded-full object-cover border border-slate-200" />
                        <button onClick={() => setLogo(null)} className="text-[10px] font-bold text-red-600 bg-red-50 px-2 py-0.5 rounded">Remove</button>
                     </div>
                  ) : (
                    <label className="text-[10px] font-bold text-[#004080] cursor-pointer hover:bg-slate-50 px-2 py-1 rounded transition-colors">
                      Upload Logo
                      <input type="file" accept="image/*" className="hidden" onChange={handleLogoUpload} />
                    </label>
                  )}
               </div>
            </div>

            {/* Action Button */}
            <button 
              onClick={handleDownload}
              className="w-full bg-[#004080] text-white font-bold text-sm py-4 rounded-xl shadow-md shadow-blue-900/10 active:scale-[0.98] transition-all flex items-center justify-center gap-2"
            >
              <i className="ph-bold ph-download-simple text-lg"></i>
              Save QR Code
            </button>
            
          </div>
        </div>
      );
    };

    // 3. Packet View (URL Shortener)
    
    // Decoding Text Component
    const DecodingText = ({ text }) => {
      const [display, setDisplay] = useState('');
      const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
      
      useEffect(() => {
        if (!text) {
          setDisplay('');
          return;
        }

        let iterations = 0;
        const maxIterations = 15; // How many scrambles before fixing
        
        const interval = setInterval(() => {
          setDisplay(prev => {
             return text.split("")
              .map((char, index) => {
                if (index < iterations) {
                  return text[index];
                }
                return chars[Math.floor(Math.random() * chars.length)];
              })
              .join("");
          });

          if (iterations >= text.length) {
            clearInterval(interval);
            setDisplay(text); // Ensure final is correct
          }
          
          iterations += 1/2; // Speed control
        }, 30);

        return () => clearInterval(interval);
      }, [text]);

      return <span className="font-mono">{display}</span>;
    };

    const PacketView = ({ setTab }) => {
      const [longUrl, setLongUrl] = useState('');
      const [alias, setAlias] = useState('');
      const [domain, setDomain] = useState('tinyurl.com');
      const [result, setResult] = useState('');
      const [loading, setLoading] = useState(false);
      const [error, setError] = useState('');
      const [missingToken, setMissingToken] = useState(false);
      const [copied, setCopied] = useState(false);

      const shortenUrl = async () => {
        if (!longUrl) {
          setError("Enter a link first");
          return;
        }

        const token = localStorage.getItem('tinyurl_api_token');
        if (!token) {
          setError("API Token Missing");
          setMissingToken(true);
          return;
        }

        setError('');
        setMissingToken(false);
        setLoading(true);
        setResult(''); // Clear previous to trigger decode
        setCopied(false);

        try {
          const payload = { url: longUrl, domain: domain };
          if (alias) payload.alias = alias;

          const res = await fetch('https://api.tinyurl.com/create', {
            method: 'POST',
            headers: {
              'Authorization': `Bearer ${token}`,
              'Content-Type': 'application/json'
            },
            body: JSON.stringify(payload)
          });

          const data = await res.json();
          if (res.ok) {
            setResult(data.data.tiny_url);
          } else {
            if (res.status === 401 || data.errors?.[0]?.includes('authenticat')) {
              setError("Invalid Token");
              setMissingToken(true);
            } else {
              setError("Error shortening link");
            }
          }
        } catch (e) {
          setError("Check connection");
        } finally {
          setLoading(false);
        }
      };

      const copyToClipboard = () => {
        const fallbackCopy = (text) => {
            const textArea = document.createElement("textarea");
            textArea.value = text;
            textArea.style.position = "fixed";
            textArea.style.left = "-9999px";
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            try { document.execCommand('copy'); } catch (err) {}
            document.body.removeChild(textArea);
        };
        if (navigator.clipboard && navigator.clipboard.writeText) {
            navigator.clipboard.writeText(result).catch(() => fallbackCopy(result));
        } else {
            fallbackCopy(result);
        }
        
        // Show success animation
        setCopied(true);
        setTimeout(() => setCopied(false), 2000);
      };

      return (
        <div className="animate-enter flex flex-col space-y-5 pt-6 pb-8">
           <div className="text-center pb-2">
            <h1 className="text-xl font-bold tracking-tight text-slate-800">Packet</h1>
            <p className="text-[10px] text-slate-500 font-bold tracking-widest uppercase">Link Shortener</p>
          </div>

          {/* Main Container */}
          <div className="bg-white rounded-xl shadow-sm border border-slate-200 p-5 space-y-5">
            
            <div className="flex bg-slate-50 p-1 rounded-lg">
               {['tinyurl.com', 'tiny.one'].map(d => (
                 <button 
                  key={d}
                  onClick={() => setDomain(d)}
                  className={`flex-1 py-2 text-[10px] font-bold rounded-md transition-all ${domain === d ? 'bg-white shadow-sm text-slate-900' : 'text-slate-400'}`}
                 >{d}</button>
               ))}
            </div>

            <div className="space-y-4">
              <div className="space-y-1">
                <label className="ml-1 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Destination</label>
                <div className="relative group">
                  <div className="absolute left-3 top-1/2 -translate-y-1/2 text-slate-300">
                    <i className="ph-bold ph-link text-lg"></i>
                  </div>
                  <input 
                    type="text" 
                    value={longUrl} 
                    onChange={e => setLongUrl(e.target.value)}
                    placeholder="Paste link here..."
                    className="w-full bg-slate-50 rounded-lg pl-10 pr-4 py-3 font-semibold text-sm text-slate-800 placeholder-slate-400 border-none"
                  />
                </div>
              </div>

              <div className="space-y-1">
                <label className="ml-1 text-[10px] font-bold text-slate-400 uppercase tracking-widest">Alias (Optional)</label>
                <div className="flex items-center">
                  <span className="bg-slate-50 text-slate-400 text-[10px] font-bold px-3 py-3 rounded-l-lg border-r border-white font-mono whitespace-nowrap">
                    {domain}/
                  </span>
                  <input 
                    type="text" 
                    value={alias}
                    onChange={e => setAlias(e.target.value)}
                    placeholder="custom-name"
                    className="w-full bg-slate-50 rounded-r-lg px-4 py-3 font-semibold text-sm text-slate-800 placeholder-slate-400 border-none"
                  />
                </div>
              </div>
            </div>

            {/* Error Message */}
            {error && (
              <div className="text-red-600 text-[10px] font-bold bg-red-50 p-3 rounded-lg flex items-center justify-between border border-red-100">
                <div className="flex items-center gap-2">
                   <i className="ph-fill ph-warning-circle text-base"></i> {error}
                </div>
                {missingToken && (
                  <button onClick={() => setTab('settings')} className="bg-white text-red-600 px-2 py-1 rounded shadow-sm border border-red-100 hover:bg-red-50">
                    Fix
                  </button>
                )}
              </div>
            )}

            <button 
              onClick={shortenUrl}
              disabled={loading}
              className="relative overflow-hidden w-full bg-[#004080] text-white font-bold text-sm py-4 rounded-xl shadow-md shadow-blue-900/10 active:scale-[0.98] transition-all flex items-center justify-center gap-2 disabled:opacity-70 disabled:scale-100"
            >
              {loading ? (
                <>
                  <div className="packet-loader w-full opacity-50"></div>
                  <span className="relative z-10 font-bold">Compressing...</span>
                </>
              ) : (
                <>
                  <i className="ph-bold ph-arrows-in-line-horizontal text-lg"></i>
                  <span>Shrink Link</span>
                </>
              )}
            </button>
          </div>

          {/* Persistent Result Container */}
          <div className="bg-white rounded-xl shadow-sm border border-slate-200 p-5 flex flex-col justify-center min-h-[140px]">
             {result ? (
               <div className="flex flex-col gap-4">
                 <div className="flex justify-between items-center">
                   <span className="text-[10px] font-bold text-[#004080] uppercase tracking-widest">Short Link Ready</span>
                   <i className="ph-fill ph-check-circle text-[#004080] text-xl"></i>
                 </div>
                 
                 <div className="text-lg font-bold text-slate-800 tracking-tight break-all font-mono">
                   <DecodingText text={result} />
                 </div>
                 
                 <div className="grid grid-cols-2 gap-3 mt-1">
                   <button 
                     onClick={copyToClipboard} 
                     className={`
                       border py-2.5 rounded-lg text-xs font-bold active:scale-95 transition-all flex items-center justify-center gap-2 duration-300
                       ${copied ? 'bg-emerald-50 border-emerald-200 text-emerald-600' : 'bg-slate-50 hover:bg-slate-100 border-slate-200 text-slate-700'}
                     `}
                   >
                     {copied ? <i className="ph-bold ph-check text-base"></i> : <i className="ph-bold ph-copy text-base"></i>}
                     {copied ? 'Copied!' : 'Copy'}
                   </button>
                   <button onClick={() => window.open(result, '_blank')} className="bg-[#004080] py-2.5 rounded-lg text-xs font-bold text-white shadow-md shadow-blue-900/10 active:scale-95 transition-transform flex items-center justify-center gap-2">
                     <i className="ph-bold ph-arrow-square-out"></i> Open
                   </button>
                 </div>
               </div>
             ) : (
               <div className="flex flex-col items-center justify-center text-slate-300 gap-2 h-full">
                 <i className="ph-duotone ph-link-break text-3xl"></i>
                 <span className="text-xs font-semibold">Result will appear here</span>
               </div>
             )}
          </div>

        </div>
      );
    };

    // 4. Settings View
    const SettingsView = () => {
      const [token, setToken] = useState('');
      const [savedStatus, setSavedStatus] = useState('');
      
      useEffect(() => {
        const saved = localStorage.getItem('tinyurl_api_token');
        if (saved) setToken(saved);
      }, []);

      const saveToken = (e) => {
        const val = e.target.value;
        setToken(val);
        localStorage.setItem('tinyurl_api_token', val);
        setSavedStatus('Saved');
        setTimeout(() => setSavedStatus(''), 2000);
      };

      return (
        <div className="animate-enter space-y-5 pt-6 pb-8">
          <div className="text-center pb-2">
            <h1 className="text-xl font-bold tracking-tight text-slate-800">Settings</h1>
            <p className="text-[10px] text-slate-500 font-bold tracking-widest uppercase">System Config</p>
          </div>

          <div className="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div className="p-6 border-b border-slate-50">
               <div className="flex items-center justify-between mb-3">
                 <div className="flex items-center gap-3">
                   <div className="w-8 h-8 rounded-full bg-slate-50 flex items-center justify-center text-[#004080]">
                     <i className="ph-fill ph-key text-lg"></i>
                   </div>
                   <h3 className="font-bold text-slate-900 text-sm">API Key</h3>
                 </div>
                 {savedStatus && <span className="text-[10px] font-bold text-emerald-600 bg-emerald-50 px-2 py-1 rounded animate-enter">{savedStatus}</span>}
               </div>
               
               <p className="text-xs text-slate-500 leading-relaxed mb-4">
                 Configure TinyURL API for link shortening services.
                 <a href="https://tinyurl.com/app/settings/api" target="_blank" className="text-[#004080] font-bold ml-1 hover:underline">Get Token</a>
               </p>
               
               <input 
                 type="password" 
                 value={token}
                 onChange={saveToken}
                 placeholder="Paste token..."
                 className="w-full bg-slate-50 rounded-lg px-4 py-3 text-sm font-mono border-none text-slate-800 focus:bg-white focus:ring-1 focus:ring-slate-200 transition-all"
               />
            </div>
            
            <div className="p-6 bg-slate-50">
               <h3 className="font-bold text-slate-900 mb-4 text-sm">About Decode</h3>
               <div className="space-y-3">
                 <div className="flex justify-between items-center text-xs p-3 bg-white rounded-lg shadow-sm border border-slate-100">
                   <span className="text-slate-500 font-medium">Build Version</span>
                   <span className="font-mono font-bold text-slate-700 bg-slate-100 px-2 py-0.5 rounded text-[10px]">v6.0.0</span>
                 </div>
                 <div className="flex justify-between items-center text-xs p-3 bg-white rounded-lg shadow-sm border border-slate-100">
                   <span className="text-slate-500 font-medium">Developer</span>
                   <span className="font-bold text-slate-800">darylmilanes.com</span>
                 </div>
               </div>
            </div>
          </div>
        </div>
      );
    };

    // 5. Main App Shell
    const App = () => {
      const [activeTab, setActiveTab] = useState('pixelate');
      
      const settings = {
        defaultColor: '#004080'
      };

      return (
        <div className="h-full w-full flex flex-col relative">
          
          <main className="flex-1 overflow-y-auto overflow-x-hidden no-scrollbar w-full px-4 pb-24">
            <div className="max-w-md mx-auto">
              {activeTab === 'pixelate' && <PixelateView settings={settings} />}
              {activeTab === 'packet' && <PacketView setTab={setActiveTab} />}
              {activeTab === 'settings' && <SettingsView />}
            </div>
          </main>

          <TabBar activeTab={activeTab} setTab={setActiveTab} />
          
        </div>
      );
    };

    const root = ReactDOM.createRoot(document.getElementById('root'));
    root.render(<App />);
  </script>
</body>
</html>
